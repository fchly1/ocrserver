webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container",attrs:{id:"app"}},[this._m(0),this._v(" "),e("router-view")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"jumbotron"},[e("h1",[this._v("网络图片/本地图片识别")])])}]};var a=n("VU/8")({name:"App"},s,!1,function(t){n("WHtC")},null,null).exports,r=n("/ocq"),o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),n("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),n("br"),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},o,!1,function(t){n("Ugm9")},"data-v-694cd902",null).exports;var l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"showbox-item"},[e("div",{staticClass:"imgbox col-md-5"},[e("img",{staticClass:"img-responsive",attrs:{src:this.item.file,alt:""}})]),this._v(" "),e("div",{staticClass:"col-md-7"},[e("textarea",{staticClass:"form-control",staticStyle:{width:"100%",height:"300px"},attrs:{name:"showtext"}},[this._v(this._s(this.item.text))])])])},staticRenderFns:[]};var u=n("VU/8")({name:"showboxitem",props:["item"],data:function(){return{imgurl:"",showtext:""}}},l,!1,function(t){n("p6w1")},"data-v-23159d28",null).exports,c="http://localhost:3000/",h=n("GG98"),v=n.n(h),m=n("UYS4"),p=n.n(m),f=function(t,e){v.a.post(c+"upload").attach("upimgfile",t).end(function(t,n){if(n.ok){var i=n.body.file,s=[];p.a.getDocument(i).then(function(t){!function t(e,n,i,s){var a=n.numPages;n.getPage(e).then(function(r){var o=r.getViewport(1.5),l=document.createElement("canvas"),u=l.getContext("2d");l.height=o.height,l.width=o.width;var h={canvasContext:u,viewport:o};r.render(h).then(function(){var r=l.toDataURL().replace("data:image/png;base64,","");i.push(r),e<a?t(++e,n,i,s):function(t,e){v.a.post(c+"batchocr").send({imgs:t}).end(function(n,i){if(i.ok){for(var s=0;s<t.length;s++)i.body[s].file="data:image/png;base64,"+t[s];e(i.body)}})}(i,s)})})}(1,t,s,function(t){e(t)})})}})};var d={name:"imgcheck",components:{Showboxitem:u},data:function(){return{msg:"Welcome to Your Vue.js App",showtext:"",imgurl:"请输入网络图片url",isDisabled:null,items:[{text:"",file:"请输入网络图片url"}]}},methods:{upimgfile:function(){document.getElementById("file").click()},filechange:function(t){var e=this;this.isDisabled=!0;var n,i,s=t.target.files[0],a=s.type,r=s.size;return/pdf|jpeg|png|jpg/.test(a)?r>52428800?alert("请上传小于50M的文件"):void(a.indexOf("pdf")>-1?f(s,function(t){console.log(t),e.imgurl=t.file,e.items=[],e.isDisabled=null,t.map(function(t){e.items.push(t)})}):(n=s,i=function(t){console.log(t),e.imgurl=t.file,e.items=[],e.isDisabled=null,e.items.push(t)},v.a.post(c+"upload").attach("upimgfile",n).end(function(t,e){e.ok&&i(e.body)}))):alert("请上传图片文件或者Pdf文件")},urlcheck:function(){var t=this;t.isDisabled=!0;var e=this.imgurl;/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?.(jpg|png|jpeg|bmp)/.test(e)?function(t,e){v.a.post(c+"urlocr").send({imgurl:t}).end(function(t,n){n.ok&&e(n.body)})}(e,function(e){t.imgurl=e.file,t.items=[],t.isDisabled=null,t.items.push(e)}):(alert("输入的网址不合法"),t.isDisabled=null)}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"imgcheck "},[n("div",{staticClass:"form-group "},[n("input",{staticClass:"form-control",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(e){t.filechange(e)}}})]),t._v(" "),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.imgurl,expression:"imgurl"}],staticClass:"form-control",attrs:{type:"text","aria-label":"...",placeholder:"请输入网络图片url"},domProps:{value:t.imgurl},on:{input:function(e){e.target.composing||(t.imgurl=e.target.value)}}}),t._v(" "),n("div",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:t.isDisabled},on:{click:function(e){t.urlcheck()}}},[t._v("检测图片")]),t._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:t.isDisabled},on:{click:function(e){t.upimgfile()}}},[t._v("图片/pdf上传")])])]),t._v(" "),t._l(t.items,function(t){return n("div",{staticClass:"row showbox"},[n("Showboxitem",{attrs:{item:t}})],1)}),t._v(" "),n("canvas",{attrs:{id:"the-canvas"}})],2)},staticRenderFns:[]};var _=n("VU/8")(d,g,!1,function(t){n("hdAz")},"data-v-671bafb0",null).exports;i.a.use(r.a);var b=new r.a({routes:[{path:"/",name:"imgcheck",component:_}]});n("XTiQ");i.a.config.productionTip=!1,new i.a({el:"#app",router:b,components:{App:a},template:"<App/>"})},Ugm9:function(t,e){},WHtC:function(t,e){},XTiQ:function(t,e){},hdAz:function(t,e){},p6w1:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.cb918b3b303b30873672.js.map